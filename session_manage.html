<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Manage Sessions - Exam ERP</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin:0; padding:0;
  font-family:Poppins,sans-serif;
  background:#eef1f6;
}
.container {
  width:500px; margin:50px auto;
  background:#fff; padding:25px;
  border-radius:12px;
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
h2 { text-align:center; color:#233465; }

input {
  width:100%; padding:12px;
  border:1px solid #ccc; border-radius:8px;
  margin-bottom:10px; font-size:15px;
}
button {
  width:100%; padding:12px;
  background:#233465; color:#fff;
  border:none; border-radius:8px;
  cursor:pointer;
  font-size:16px;
  margin-bottom:12px;
}
button:hover { background:#1a2648; }

.back-btn {
  width:auto;
  background:#324a87;
  padding:10px 18px;
  border-radius:8px;
  margin-bottom:20px;
}

.session-box {
  background:#f4f6fb; padding:12px;
  margin:8px 0; border-radius:8px;
  display:flex; justify-content:space-between;
  align-items:center;
}

.delete-btn {
  background:#e63946;
  padding:6px 12px;
  color:#fff; border:none;
  border-radius:6px; cursor:pointer;
  font-size:14px;
}
</style>
</head>

<body>

<div class="container">

    <!-- Back to Dashboard -->
    <button class="back-btn" onclick="location.href='dashboard.html'">
        ‚Üê Back to Dashboard
    </button>

    <h2>Session Management</h2>

    <input type="text" id="newSession" placeholder="Enter new session (example: 2025-26)">
    <button onclick="addSession()">Add Session</button>

    <h3>Available Sessions</h3>
    <div id="sessionList"></div>
</div>

<script>
const EXAM_API = "https://exam-backend-117372286918.asia-south1.run.app/";

/* LOAD SESSIONS */
async function loadSessions() {
    try {
        const res = await fetch(`${EXAM_API}/session/list`);
        const data = await res.json();

        const box = document.getElementById("sessionList");
        box.innerHTML = "";

        data.sessions.forEach(s => {
            box.innerHTML += `
                <div class="session-box">
                    <span>${s}</span>
                    <button class="delete-btn" onclick="deleteSession('${s}')">Delete</button>
                </div>
            `;
        });
    } catch (error) {
        alert("Failed to load sessions");
    }
}

/* ADD SESSION */
async function addSession() {
    const session = document.getElementById("newSession").value.trim();
    if (!session) return alert("Enter a session");

    const res = await fetch(`${EXAM_API}/session/add`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ session })
    });

    const data = await res.json();
    alert(data.message);

    document.getElementById("newSession").value = "";
    loadSessions();
}

/* DELETE SESSION */
async function deleteSession(session) {
    if (!confirm(`Delete session ${session}?`)) return;

    const res = await fetch(`${EXAM_API}/session/delete`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ session })
    });

    const data = await res.json();
    alert(data.message);
    loadSessions();
}

window.onload = loadSessions;
</script>

</body>
</html>





